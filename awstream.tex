\section{AWStream: Network Resource Adaptation}

\begin{frame}{Scarce and Variable Bandwidth}

\end{frame}

\begin{frame}{Fidelity vs.\,Freshness}
  \vspace{2em}
  \begin{figure}
    \centering
    \includegraphics[width=0.8\columnwidth]{figures/fidelity-freshness.pdf}
    \caption{The trade-off space between data freshness and fidelity when facing
      insufficient bandwidth.}
  \end{figure}
\end{frame}

\input{frames/awstream-motivation.tex}

\begin{frame}{Making Adaptation Practical is Challenging}

  \textbf{Goal}: Minimize bandwidth while maximizing application accuracy

  \begin{block}{My block}
    Content of my block.
  \end{block}

  \textbf{Challenges}:
  \begin{itemize}
  \item Application-specific optimizations don't generalize
  \item API. \texttt{maybe} operators to express adaptation.
  \item It requires expertise and manual work to explore multidimensional
    adaptation
  \item Profiling: automatically learn Pareto-optimal strategy with
    multi-dimensional exploration.
  \item The adaptation needs to happen at the runtime: no viable system yet
  \item runtime adaptation balances the latency with data accuracy
  \end{itemize}
\end{frame}

\begin{frame}{API}
  \begin{table}
    \scriptsize
    \begin{tabular}{ c r l }
      \toprule
      \multirow{4}{*}{Normal}
      & \textit{map} (f: I $\Rightarrow$ O) & Stream<I> $\Rightarrow$ Stream<O> \\
      & \textit{skip} (i: Integer) & Stream<I> $\Rightarrow$
                                     Stream<I> \\
      & \textit{window} (count: Integer, f: Vec<I> $\Rightarrow$ O) & Stream<I> $\Rightarrow$
                                                                      Stream<O> \\
      & ... & ... \\
      \midrule
      \multirow{5}{*}{Degradation}
      & \textit{maybe} (knobs: Vec<T>, f:  (T, I) $\Rightarrow$ I) & Stream<I> $\Rightarrow$
                                                                     Stream<I> \\
      & \textit{maybe\_skip} (knobs: Vec<Integer>) & Stream<I> $\Rightarrow$ Stream<I> \\
      & \textit{maybe\_head} (knobs: Vec<Integer>) & Stream<Vec<I>{}> $\Rightarrow$
                                                     Stream<Vec<I>{}> \\
      & ... & ... \\
      \bottomrule
    \end{tabular}
  \end{table}
\end{frame}

\begin{frame}[fragile]{\texttt{maybe(knobs: Vec<T>, f: (T, I) => I)}}
  \begin{lstlisting}
let quantized_stream = vec![1, 2, 3, 4].into_stream()
    .maybe(vec![2, 4], |k, val| val.wrapping_div(k))
    .collect();
  \end{lstlisting}
  Output: [1, 2, 3, 4] (no degradation), [0, 1, 1, 2] (k=2), or [0, 0, 0, 1]
  (k=4).

  \pause
  \vspace{2em}
  \begin{lstlisting}
let app = Camera::new((1920, 1080), 30)
    .maybe_downsample(vec![(1600, 900), (1280, 720)])
    .maybe_skip(vec![2, 5])
    .map(|frame| frame.show())
    .compose();
  \end{lstlisting}

\end{frame}

\begin{frame}{Applications}
  \begin{table}
    \footnotesize
    \centering
    \begin{tabular}{c c c c}
      \toprule
      Application & Knobs & Accuracy & Dataset \\
      \midrule
      \specialcell{Augmented\\Reality}
                  & \specialcell{resolution \\ frame rate \\ quantization }
                  & F1 score~\cite{Rijsbergen:1979:IR:539927}
                          & \specialcell{iPhone video clips\\training: office (24
      s)\\testing: home (246 s)} \\
      \midrule
      \specialcell{Pedestrian\\Detection}
                  & \specialcell{resolution \\ frame rate \\ quantization }
                  & F1 score
                          & \specialcell{MOT16~\cite{milan2016mot16}\\training: MOT16-04\\testing: MOT16-03} \\
      \midrule
      \specialcell{Log Analysis\\(Top-K, K=50)}
                  & \specialcell{head (N) \\ threshold (T) }
                  & \specialcell{Kendall's $\tau$~\cite{abdi2007kendall}}
                          & \specialcell{\href{https://www.sec.gov}{SEC.gov} logs~\cite{edgarlog} \\ training: 4 days \\
      testing: 16 days} \\
      \bottomrule
    \end{tabular}
    \vspace{0.5em}
    \caption{Application details.}
    \label{tab:apps}
    \vspace{-1em}
  \end{table}
\end{frame}

\begin{frame}{Runtime Adaptation}
  \begin{figure}
    \centering
    \includegraphics[width=\linewidth]{figures/runtime-adaptation.pdf}
    \caption{Runtime adaptation system architecture.}
    \label{fig:runtime}
  \end{figure}
\end{frame}

\begin{frame}{Top-K}
  \begin{figure}
    \centering
    \includegraphics[width=\columnwidth]{figures/topk.pdf}
    \caption{A distributed Top-K application with two degradation operations:
      \texttt{head} and \texttt{threshold}. In this example, \texttt{f2}, which
      is not in Top-1 for either client, becomes the global Top-1 after the
      merge. It would have been purged if the clients use threshold T=3,
      demonstrating degradation that reduces data sizes affects fidelity.}
    \label{fig:topk}
    \vspace{-0.5em}
  \end{figure}
\end{frame}

\begin{frame}{Profiles}
  \begin{figure}
    \includegraphics[width=\linewidth]{figures/profile-mot.pdf}
  \end{figure}
\end{frame}


\begin{frame}{All Profiles}
  \begin{figure}[htb]
    \centering
    \begin{subfigure}[t]{0.49\textwidth}
      \centering
      \includegraphics[width=\textwidth]{figures/profile-darknet.pdf}
      \caption{Augmented Reality (AR)}
      \label{fig:ar-profile}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{0.49\textwidth}
      \centering
      \includegraphics[width=\textwidth]{figures/profile-mot.pdf}
      \caption{Pedestrian Detection (PD)}
      \label{fig:pd-profile}
    \end{subfigure}
    \caption{Application profiles of three applications. Each cross point is one
      configuration $c$'s performance $(B(c), A(c))$. All figures show the
      Pareto boundary as well as the performance if only tuning one
      dimension. Note the x-axis is in log scale.}
    \label{fig:all-profiles}
  \end{figure}
\end{frame}

\begin{frame}{All Profiles}
  \begin{figure}
    \includegraphics[width=0.9\linewidth]{figures/runtime_darknet-timeseries.pdf}
  \end{figure}
\end{frame}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "talk"
%%% TeX-engine: xetex
%%% End:
